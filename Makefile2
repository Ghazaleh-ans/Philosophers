NAME = philo
CC = cc
CFLAGS = -Wall -Werror -Wextra -g -pthread
INCLUDES = -I.
SRCS_DIR        = srcs/
SRC            = $(SRCS_DIR)main.c $(SRCS_DIR)init.c $(SRCS_DIR)utils.c $(SRCS_DIR)philo.c \
					$(SRCS_DIR)monitor.c $(SRCS_DIR)time.c $(SRCS_DIR)input.c $(SRCS_DIR)utils_libft.c \
					$(SRCS_DIR)utils_threads.c $(SRCS_DIR)philo_eat.c
OBJ = $(SRC:.c=.o)
all: $(NAME)
$(NAME): $(OBJ)
	$(CC) $(CFLAGS) $(OBJ) -o $(NAME)
%.o: %.c philo.h
	$(CC) $(CFLAGS) $(INCLUDES) -c $< -o $@
	
clean:
	rm -f $(OBJ)
fclean: clean
	rm -f $(NAME)
sanitize: CFLAGS += -fsanitize=address,undefined,leak
sanitize: fclean all
thsan: CFLAGS += -fsanitize=thread
thsan: re
debug: CFLAGS += -g3 -fsanitize=address -DDEBUG
debug: fclean all
re: fclean all
.PHONY: all clean fclean re valgrind helgrind sanitize thsan debug